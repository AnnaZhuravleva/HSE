The emission of the 4.438-MeV gamma-ray line in proton inelastic scattering off 12C has been investigated in detail. For this, two independent descriptions of the correlated scattering and emission process have been developed, one for the direct reaction mechanism and the other for the compound-nucleus (CN) component. Direct reactions were calculated in the framework of the coupled-channels formalism, while the CN component was described as a superposition of separate resonances with definite spin and parity, treated with the angular momentum coupling theory. Both components were incoherently added and compared to a comprehensive data set on measured line shapes and gamma-ray angular distributions in the proton energy range Ep = 5.44 - 25.0 MeV. In the range Ep ~ 14 - 25 MeV, good agreement with data was obtained with a dominating direct reaction component. At lower energy, an important CN component was required to describe line shape and angular distribution data. In general, a good decription of the data could be found for a CN component with spin and parity corresponding to a known nearby resonance. The new calculation improves significantly the agreement with line shape data compared to previous ones. Based on these results, predictions for line shapes and gamma-ray angular distributions up to Ep = 100 MeV were made and applied to gamma-ray emissions in solar flares and proton radiotherapy.