The emission of the 4.438-MeV gamma-ray line in proton inelastic scattering off 12C has been investigated in detail. The correlated scattering and emission process is described independently for the direct reaction mechanism and for the compound-nucleus (CN) component. The inelastic scattering process for direct reactions is treated with a coupled-channels nuclear reaction code, while the CN component is described as a superposition of separate resonances with definite spin and parity, treated with the angular momentum coupling theory. The calculations are compared to a comprehensive data set on measured line shapes and angular distributions in the proton energy range E_p = 5.44 - 25.0 MeV. In the range E_p ~ 12 - 25 MeV a good agreement is obtained in calculations assuming direct reactions with only a negligible part of CN reactions. At lower energy, the data are reproduced by incoherent sums of the direct component with typically one CN resonance. Based on these results, the prospectives for line shape calculations applied to solar flares and gamma-ray emission in proton radiotherapy are discussed.