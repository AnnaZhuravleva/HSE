Quantum error correction of a surface code or repetition code requires the pairwise matching of error events in a space-time graph of qubit measurements, such that the total weight of the matching is minimized. The input weights follow from a physical model of the error processes that affect the qubits. This approach becomes problematic if the system has sources of error that change over time. Here we show how the weights can be determined from the measured data in the absence of an error model. The resulting adaptive decoder performs well in a time-dependent environment, provided that the characteristic time scale $\tau_{\mathrm{env}}$ of the variations is greater than $\delta t/\bar{p}$, with $\delta t$ the duration of one error-correction cycle and $\bar{p}$ the typical error probability per qubit in one cycle.