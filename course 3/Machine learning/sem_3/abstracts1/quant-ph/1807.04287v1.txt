Security analyses of quantum cryptographic protocols typically rely on certain conditions; one such condition is that the sender (Alice) and receiver (Bob) have isolated devices inaccessible to third parties. If an eavesdropper (Eve) has a side-channel into one of the devices, then the key rate may be sensibly reduced. In this paper, we consider an attack on a coherent-state protocol, where Eve not only taps the main communication channel but also hacks Alice's device. This is done by introducing a Trojan horse mode with low mean number of photons $\bar{n}$ which is then modulated in a similar way to the signal state. First we show that this strategy can be reduced to an attack without side channels but with higher loss and noise in the main channel. Then we show how the key rate rapidly deteriorates for increasing photons $\bar{n}$, being halved at long distances each time $\bar{n}+1$ doubles. Our work suggests that Alice's device should also be equipped with sensing systems that are able to detect and estimate the total number of incoming and outgoing photons.