A minimally-invasive way to detect the presence of a stealth target is to probe it with a single photon and analyze the reflected signals. The efficiency of such a conventional detection scheme can potentially be enhanced by the method of quantum illumination, where entanglement is exploited to break the classical limits. The question is, what is the optimal quantum state that allows us to achieve the detection limit with a minimal error? Here we address this question for discrete signals, by deriving a complete and general set of analytic solutions for the whole parameter space, which can be classified into three distinct regions, in the form of phase diagrams for both conventional and quantum illumination. Interestingly, whenever the reflectivity of the target is less than some critical values, all received signals become useless, which is true even if entangled resources are employed. However, there does exist a region where quantum illumination can provide advantages over conventional illumination; there, the optimal signal state is an entangled state with an entanglement spectrum inversely proportional to the spectrum of the environmental state. These results not only impose fundamental limits in applications such as quantum radars, but also suggest how to become immune against the attack of minimally-invasive detection.