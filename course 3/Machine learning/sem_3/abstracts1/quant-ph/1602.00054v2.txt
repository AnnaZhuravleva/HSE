We propose a heralded quantum repeater based on the scattering of photons off single emitters in one-dimensional waveguides. We show the details by implementing nonlocal entanglement generation, entanglement swapping, and entanglement purification modules with atoms in waveguides, and discuss the feasibility of the repeater with currently achievable technology. In our scheme, the faulty events can be discarded by detecting the polarization of the photons. That is, our protocols are accomplished with fidelity of 100% in principle, which is advantageous for implementing realistic long-distance quantum communication. Moreover, additional atomic qubits are not required, but only a single-photon medium. Our scheme is scalable and attractive since it can be realized in solid-state quantum systems. With the great progress on controlling atom-waveguide systems, the repeater may be very useful in quantum information processing in the future.