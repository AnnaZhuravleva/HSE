We develop a framework for certifying randomness from Bell-test trials based on directly estimating the probability of the measurement outcomes with adaptive test supermartingales. The number of trials need not be predetermined, and one can stop performing trials early, as soon as the desired amount of randomness is extractable. It can be used with arbitrary, partially known and time-dependent probabilities for the random settings choices. Furthermore, it is suitable for application to experimental configurations with low Bell violation per trial, such as current optical loophole-free Bell tests. It is possible to adapt to time-varying experimental parameters. We formulate the framework for the general situation where the trial probability distributions are constrained to a known set. Randomness expansion with logarithmic settings entropy is possible for many relevant configurations. We implement probability estimation numerically and apply it to a representative settings-conditional probability distribution of the outcomes from an atomic loophole-free Bell test [Rosenfeld et al., Phys. Rev. Lett. 119:010402 (2017), arXiv:1611.04604 (2016)] to illustrate trade-offs between the amount of randomness, error, settings entropy, unknown settings biases, and number of trials. We then show that probability estimation yields more randomness from the loophole-free Bell-test data analyzed in [Bierhorst et al., arXiv:1702.05178 (2017)] and tolerates adversarial settings probability biases.