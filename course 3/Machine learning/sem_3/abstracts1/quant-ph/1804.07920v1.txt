We propose a general experimental quantum state engineering scheme for the high-fidelity conditional generation of a large variety of nonclassical states of traveling optical fields. It contains a single homodyne measurement, thereby achieving a high success probability. The generated state is encoded in the optimal choice of the physically controllable parameters of the arrangement. These parameter values are determined via numerical optimization.