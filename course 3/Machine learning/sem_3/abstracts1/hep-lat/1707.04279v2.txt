A relativistic formalism for relating the the energies of the states of three scalar particles in finite volume to infinite volume scattering amplitudes has recently been developed. This formalism has been used to predict the energy of the state closest to threshold in an expansion in powers of $1/L$, with $L$ the box length. This expansion has been tested previously by a perturbative calculation of the threshold energy in $\lambda \phi^4$ theory, working to third order in $\lambda$ and up to $\mathcal O(1/L^6)$ in the volume expansion. However, several aspects of the predicted threshold behavior do not enter until fourth (three-loop) order in perturbation theory. Here I extend the perturbative calculation to fourth order and find agreement with the general prediction. This check also requires a two-loop calculation of the infinite-volume off-shell two-particle scattering amplitude near threshold. As a spin-off, I check the threshold expansion for two particles to the same order, finding agreement with the result that follows from L\"uscher's formalism.