We address the question of convergence of Schr\"odinger operators on metric graphs with general self-adjoint vertex conditions as lengths of some of graph's edges shrink to zero. We determine the limiting operator and study convergence in a suitable norm resolvent sense. It is noteworthy that, as edge lengths tend to zero, standard Sobolev-type estimates break down, making convergence fail for some graphs. We use a combination of functional-analytic bounds on the edges of the graph and Lagrangian geometry considerations for the vertex conditions to establish a sufficient condition for convergence. This condition encodes an intricate balance between the topology of the graph and its vertex data. In particular, it does not depend on the potential, on the differences in the rates of convergence of the shrinking edges, or on the lengths of the unaffected edges.