Small-pitch 3D silicon pixel detectors have been investigated as radiation-hard candidates for the innermost layers of the HL-LHC pixel detector upgrades. Prototype 3D sensors with pixel sizes of 50$\times$50 and 25$\times$100 $\mu$m$^{2}$ connected to the existing ATLAS FE-I4 readout chip have been produced by CNM Barcelona. Irradiations up to particle fluences of $3\times10^{16}$ n$_{\mathrm{eq}}$/cm$^2$, beyond the full expected HL-LHC fluences at the end of lifetime, have been carried out at Karlsruhe and CERN. The performance of the 50$\times$50 $\mu$m$^{2}$ devices has been measured in the laboratory and beam tests at CERN SPS. A high charge collected and a high hit efficiency of 98% were found up to the highest fluence. The bias voltage to reach the target efficiency of 97% at perpendicular beam incidence was found to be about 100 V at $1.4\times10^{16}$ n$_{\mathrm{eq}}$/cm$^2$ and 150 V at $2.8\times10^{16}$ n$_{\mathrm{eq}}$/cm$^2$, significantly lower than for the previous IBL 3D generation with larger electrode distance and than for planar sensors. The power dissipation at -25$^{\circ}$C and $1.4\times10^{16}$ n$_{\mathrm{eq}}$/cm$^2$ was found to be 13 mW/cm$^2$. Hence, 3D pixel detectors demonstrated superior radiation hardness and were chosen as the baseline for the inner layer of the ATLAS HL-LHC pixel detector upgrade.