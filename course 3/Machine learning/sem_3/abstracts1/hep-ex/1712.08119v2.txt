A search for electroweak production of supersymmetric particles in scenarios with compressed mass spectra in final states with two low-momentum leptons and missing transverse momentum is presented. This search uses proton-proton collision data recorded by the ATLAS detector at the Large Hadron Collider in 2015-2016, corresponding to 36.1 fb$^{-1}$ of integrated luminosity at $\sqrt{s}=13$ TeV. Events with same-flavor pairs of electrons or muons with opposite electric charge are selected. The data are found to be consistent with the Standard Model prediction. Results are interpreted using simplified models of R-parity-conserving supersymmetry in which there is a small mass difference between the masses of the produced supersymmetric particles and the lightest neutralino. Exclusion limits at 95% confidence level are set on next-to-lightest neutralino masses of up to 145 GeV for Higgsino production and 175 GeV for wino production, and slepton masses of up to 190 GeV for pair production of sleptons. In the compressed mass regime, the exclusion limits extend down to mass splittings of 2.5 GeV for Higgsino production, 2 GeV for wino production, and 1 GeV for slepton production. The results are also interpreted in the context of a radiatively-driven natural supersymmetry model with non-universal Higgs boson masses.