The vacuum polarization is a constituent of the initial state radiation correction for the cross section of the $e^+e^-$ annihilation processes. In the energy region in vicinity of the narrow resonances $J/\psi$ and $\psi(3686)$ the vacuum polarization contribution from the resonant component has a significant effect to the line-shape of lepton pair production cross section. This paper discusses some basic concepts and gives an analytical calculation to the cross section of the $e^+e^-\to\gamma^\ast/\psi\to\mu^+\mu^-$ considering the single and double vacuum polarization effect of the virtual photon propagator, and presents some numerical comparisons with the traditional treatments.