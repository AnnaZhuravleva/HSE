We propose a model to explain several muon-related experimental anomalies and the abundance of dark matter. For each SM lepton family, we introduce vector-like exotic leptons that form an iso-doublet and a right-handed Majorana fermion as an iso-singlet. A real/complex scalar field is added as a dark matter candidate. We impose a global $U(1)_\mu$ symmetry under which fields associated with the SM muon are charged. To stabilize the dark matter, we impose a $Z_2$ (or $Z_3$) symmetry under which the exotic lepton doublets and the real (or complex) scalar field are charged. We find that the model can simultaneously explain the muon anomalous magnetic dipole moment and the dark matter relic density under the constraints of various lepton flavor-violating observables, with some details depending upon whether the scalar field is real or complex. Besides, we extend the framework to the quark sector in a way similar to the lepton sector, and find that the recent anomalies associated with the $b \to s \mu^+\mu^-$ transition can also be accommodated while satisfying constraints such as the $B_{s(d)}\to \mu^+\mu^-$ decays and neutral meson mixings.