We study an extended Standard Model with a gauged U(1)$^{\prime}$ flavor symmetry, motivated not only by the fermion mass hierarchy but also by the excesses in $B \to K^{(*)} l l$ reported by the LHCb collaborations. The U(1)$^{\prime}$ charges are assigned to quarks and leptons in a flavor-dependent manner, and flavored Higgs doublets are also introduced in order to detail the Yukawa couplings at the renormalizable level. Then, the fermion mass hierarchy is realized by the vacuum alignment of the Higgs doublets. In this model, flavor-changing currents involving the gauge boson of U(1)$^{\prime}$ and the scalars generated by the Higgs doublets are predicted and the observables in the $B \to K^{(*)} l l$ process possibly deviate from the Standard Model predictions. We study the possibility that these new flavor-changing interactions can explain the excesses in the $B \to K^{(*)} l l$ process, and we derive some predictions for the other flavor-violating processes based on the analysis. We specifically investigate the $\Delta F=2$ processes and the other $B$ decays: e.g., $B \to X_s \gamma$ and $B \to D^{(*)} \tau \nu$, where the deviations are reported by the Belle and $BABAR$ collaborations.