A method to directly determine the Wilson coefficients for rare $b\to s$ transitions using $B^0\to K^{*0}\mu^+\mu^-$ decays in an unbinned maximum likelihood fit is presented. The method has several advantages compared to the conventional determination of the Wilson coefficients from angular observables that are determined in bins of $q^2$, the square of the mass of the dimuon system. The method uses all experimental information in an optimal way and automatically accounts for experimental correlations. Performing pseudoexperiments, we show the improved sensitivity of the proposed method for the Wilson coefficients. We also demonstrate that it will be possible to use the method with the combined Run 1 and 2 data sample taken by the LHCb experiment.