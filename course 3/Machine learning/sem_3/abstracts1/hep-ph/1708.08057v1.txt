We generalize the Catani Hautmann formalism to calculate the Pgq and Pqq transverse momentum dependent splitting functions. Then we use the obtained Pgq kernel to construct a low-x evolution equation for gluons that takes into account the effect of non-diagonal quark-to-gluon splittings. In order to write down a consistent equation we resum virtual corrections coming from the gluon channel and demonstrate that this implies a suitable regularization of the Pgq singularity, corresponding to a soft emitted quark. We also note that the obtained equation is in a straightforward manner generalized to a nonlinear evolution equation which takes into account effects due to the presence of high gluon densities.