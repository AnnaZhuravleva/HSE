We study production of dark matter (DM) in scenarios where in the early Universe the energy density was dominated, for some period of time, by a component with an effective equation of state parameter $w\in [-1,\,1]$. We consider both freeze-out and freeze-in mechanisms for producing the observed DM abundance in a model where the DM consists of scalar singlet particles coupled to the Standard Model sector via the Higgs portal. We show that a non-standard expansion phase can lead to a significant change in the DM abundance and therefore to observational ramifications. For example, for DM freeze-in the required portal coupling can be much larger, whereas for DM freeze-out much smaller values become allowed. We evaluate the relevant constraints and discuss prospects for direct detection of such DM.