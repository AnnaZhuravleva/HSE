We prove a central limit theorem for the linear statistics of one-dimensional log-gases, or $\beta$-ensembles. We use a method based on a change of variables which allows to treat fairly general situations, including multi-cut and, for the first time, critical cases, and generalizes the previously known results of Johansson, Borot-Guionnet and Shcherbina. In the one-cut regular case, our approach also allows to retrieve a rate of convergence as well as previously known expansions of the free energy to arbitrary order.