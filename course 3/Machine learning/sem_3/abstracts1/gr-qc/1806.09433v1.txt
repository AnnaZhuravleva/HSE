We analyze the problem of gravitational collapse considering the matching of an exterior region described by the Vaidya's metric and an interior region described by a spherically symmetric shear-free inhomogeneous geometry sourced by a viscous fluid. We establish initial and final conditions for the process in order that the outcome be a non-singular object, when this is possible, and check how it depends on the fulfillment of the energy conditions. We then apply explicitly the matching procedure to the cases of linear and nonlinear Lagrangians describing electromagnetic fields inside the star, and analyze how the different behaviors for the scale factor of the interior geometry produce singular or nonsingular final stages of the collapse depending on the range where the initial conditions lie.