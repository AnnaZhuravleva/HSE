We study a universe filled with cold dark matter in the form of discrete inhomogeneities (e.g., galaxies) and dark energy in the form of a continuous perfect fluid. We develop a first-order scalar perturbation theory in the weak gravity limit around a spatially flat Friedmann universe. Our approach works at all cosmic scales and incorporates linear and nonlinear effects with respect to energy density fluctuations. The gravitational potential can be split into individual contributions from each matter source. Each potential is characterized by a Yukawa interaction with the same range, which is of the order of 3700 Mpc at the present time. The derived equations can form the theoretical basis for numerical simulations for a wide class of modern cosmological models.