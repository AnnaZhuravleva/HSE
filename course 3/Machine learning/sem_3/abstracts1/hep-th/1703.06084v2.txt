We derive the generalization of the Knizhnik-Zamolodchikov equation (KZE) associated with the Ding-Iohara-Miki (DIM) algebra U_{q,t}(\widehat{\widehat{\mathfrak{gl}}}_1). We demonstrate that certain refined topological string amplitudes satisfy these equations and find that the braiding transformations are performed by the R-matrix of U_{q,t}(\widehat{\widehat{\mathfrak{gl}}}_1). The resulting syste is the uplifting of the \widehat{\mathfrak{u}}_1 Wess-Zumino-Witten model. The solutions to the (q,t)-KZE are identified with the (spectral dual of) building blocks of the Nekrasov partition function for 5d linear quiver gauge theories. We also construct an elliptic version of the KZE and discuss its modular and monodromy properties, the latter being related to a dual version of KZE.