We derive from ambitwistor strings new formulae for two-loop scattering amplitudes in supergravity and super-Yang-Mills theory, with any number of particles. We start by constructing a formula for the type II ambitwistor string amplitudes on a genus-two Riemann surface, and then study the localisation of the moduli space integration on a degenerate limit, where the genus-two surface turns into a Riemann sphere with two nodes. This leads to scattering amplitudes in supergravity, expressed in the formalism of the two-loop scattering equations. For super-Yang-Mills theory, we import `half' of the supergravity result, and determine the colour dependence by considering a current algebra on the nodal Riemann sphere, thereby completely specifying the two-loop analogue of the Parke-Taylor factor, including non-planar contributions. We also present in appendices explicit expressions for the Szego kernels and the partition functions for even spin structures, up to the relevant orders in the degeneration parameters, which may be useful for related investigations in conventional superstring theory.