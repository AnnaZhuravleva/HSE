We discuss the branching structure of the quantum-gravitational wave function that describes the evaporation of a black hole. A global wave function which initially describes a classical Schwarzschild geometry is continually decohered into distinct semiclassical branches by the emission of Hawking radiation. The laws of quantum mechanics dictate that the wave function evolves unitarily, but this unitary evolution is only manifest when considering the global description of the wave function: it is not implemented by time evolution on a single semiclassical branch. Conversely, geometric notions like the position or smoothness of a horizon only make sense on the level of individual branches. We consider the implications of this picture for probes of black holes by classical observers in definite geometries, like those involved in the AMPS construction. We argue that individual branches can describe semiclassical geometries free of firewalls, even as the global wave function evolves unitarily. We show that the pointer states of infalling detectors that are robust under Hamiltonian evolution are distinct from, and incompatible with, those of exterior detectors stationary with respect to the black hole horizon, in the sense that the pointer bases are related to each other via nontrivial transformations that mix system, apparatus, and environment. This result describes a Hilbert-space version of black hole complementarity.