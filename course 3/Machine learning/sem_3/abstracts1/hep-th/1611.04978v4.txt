Gauge fixing is interpreted in BV formalism as a choice of Lagrangian submanifold in an odd symplectic manifold. A natural construction defines an integration procedure on families of Lagrangian submanifolds. In string perturbation theory, the moduli space integrals of higher genus amplitudes can be interpreted in this way. We discuss the role of gauge symmetries in this construction. We derive the conditions which should be imposed on gauge symmetries for the consistency of our integration procedure. We explain how these conditions behave under the deformations of the worldsheet theory. In particular, we show that integrated vertex operator is actually an inhomogeneous differential form on the space of Lagrangian submanifolds.