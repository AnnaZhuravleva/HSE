We study the formation of dark matter halos in the concordance LCDM model over a wide range of redshifts, from z=20 to the present. Our primary focus is the halo mass function, a key probe of cosmology. By performing a large suite of nested-box N-body simulations with careful convergence and error controls (60 simulations with box sizes from 4 to 256 Mpc/h, we determine the mass function and its evolution with excellent statistical and systematic errors, reaching a few percent over most of the considered redshift and mass range. Across the studied redshifts, the halo mass is probed over 6 orders of magnitude (10^7 - 10^13.5 M_sun/h). Historically, there has been considerable variation in the high redshift mass function as obtained by different groups. We have made a concerted effort to identify and correct possible systematic errors in computing the mass function at high redshift and to explain the discrepancies between some of the previous results. We discuss convergence criteria for the required force resolution, simulation box size, halo mass range, initial and final redshift, and time stepping. Because of conservative cuts on the mass range probed by individual boxes, our results are relatively insensitive to simulation volume, the remaining sensitivity being consistent with extended Press-Schechter theory. Previously obtained mass function fits near z=0, when scaled by linear theory, are in good agreement with our results at all redshifts, although a mild redshift dependence consistent with that found by Reed and collaborators exists at low redshifts.