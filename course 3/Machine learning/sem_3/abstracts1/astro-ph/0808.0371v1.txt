We report high angular resolution observations of the HCN (3-2) line emission in the circumstellar envelope of the O-rich star W Hya with the Submillimeter Array. The proximity of this star allows us to image its molecular envelope with a spatial resolution of just ~40 AU, corresponding to about 10 times the stellar diameter. We resolve the HCN (3-2) emission and find that it is centrally peaked and has a roughly spherically symmetrical distribution. This shows that HCN is formed in the innermost region of the envelope (within ~10 stellar radii), which is consistent with predictions from pulsation-driven shock chemistry models, and rules out the scenario in which HCN forms through photochemical reactions in the outer envelope. Our model suggests that the envelope decreases steeply in temperature and increases smoothly in velocity with radius, inconsistent with the standard model for mass-loss driven by radiative pressure on dust grains. We detect a velocity gradient of ~5 km/s in the NW--SE direction over the central 40 AU. This velocity gradient is reminescent of that seen in OH maser lines, and could be caused by the rotation of the envelope or by a weak bipolar outflow.