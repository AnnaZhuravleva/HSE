Recently, rapid observational and theoretical progress has established that black holes (BHs) play a decisive role in the formation and evolution of individual galaxies as well as galaxy groups and clusters. In particular, there is compelling evidence that BHs vigorously interact with their surroundings in the central regions of galaxy clusters, indicating that any realistic model of cluster formation needs to account for these processes. This is also suggested by the failure of previous generations of hydrodynamical simulations without BH physics to simultaneously account for the paucity of strong cooling flows in clusters, the slope and amplitude of the observed cluster scaling relations, and the high-luminosity cut-off of central cluster galaxies. Here we use high-resolution cosmological simulations of a large cluster and group sample to study how BHs affect their host systems. We focus on two specific properties, the halo gas fraction and the X-ray luminosity-temperature scaling relation, both of which are notoriously difficult to reproduce in self-consistent hydrodynamical simulations. We show that BH feedback can solve both of these issues, bringing them in excellent agreement with observations, without alluding to the `cooling only' solution that produces unphysically bright central galaxies. By comparing a large sample of simulated AGN-heated clusters with observations, our new simulation technique should make it possible to reliably calibrate observational biases in cluster surveys, thereby enabling various high-precision cosmological studies of the dark matter and dark energy content of the universe.