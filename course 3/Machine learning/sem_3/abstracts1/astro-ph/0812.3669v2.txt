Proposed 21 cm cosmology observatories for studying the epoch of reionization (z ~6-15) and dark energy (z ~0-6) envision compact arrays with tens of thousands of antenna elements. Fully correlating this many elements is computationally expensive using traditional XF or FX correlators, and has led some groups to reconsider direct imaging/FFT correlators. In this paper we develop a variation of the direct imaging correlator we call the MOFF correlator. The MOFF correlator shares the computational advantages of a direct imaging correlator, while avoiding a number of its shortcomings. In particular the MOFF correlator makes no constraints on the antenna arrangement or type, provides a fully calibrated output image including widefield polarimetry and non-coplanar baseline effects, and can be orders-of-magnitude more efficient than XF or FX correlators for compact radio cosmology arrays.