We report results from numerical simulations of star formation in the early universe that focus on gas at very high densities and very low metallicities. We argue that the gas in the central regions of protogalactic halos will fragment as long as it carries sufficient angular momentum. Rotation leads to the build-up of massive disk-like structures which fragment to form protostars. At metallicities Z ~ 10^-5 Zsun, dust cooling becomes effective and leads to a sudden drop of temperature at densities above n = 10^12 cm^-3. This induces vigorous fragmentation, leading to a very densely-packed cluster of low-mass stars. This is the first stellar cluster. The mass function of stars peaks below 1 Msun, similar to what is found in the solar neighborhood, and comparable to the masses of the very-low metallicity subgiant stars recently discovered in the halo of our Milky Way. We find that even purely primordial gas can fragment at densities 10^14 cm^-3 < n < 10^16 cm^-3, although the resulting mass function contains only a few objects (at least a factor of ten less than the Z = 10^-5 Zsun mass function), and is biased towards higher masses. A similar result is found for gas with Z = 10^-6 Zsun. Gas with Z <= 10^-6 Zsun behaves roughly isothermally at these densities (with polytropic exponent gamma ~ 1.06) and the massive disk-like structures that form due to angular momentum conservation will be marginally unstable. As fragmentation is less efficient, we expect stars with Z <= 10^-6 Zsun to be massive, with masses in excess of several tens of solar masses, consistent with the results from previous studies.