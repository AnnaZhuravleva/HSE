For higher-derivative f(R) gravity where R is the Ricci scalar, a class of models is proposed which produce viable cosmology different from the LambdaCDM one at recent times and satisfy cosmological, Solar system and laboratory tests. These models have both flat and de Sitter space-times as particular solutions in the absence of matter. Thus, a cosmological constant is zero in flat space-time, but appears effectively in a curved one for sufficiently large R. A 'smoking gun' for these models would be small discrepancy in values of the slope of the primordial perturbation power spectrum determined from galaxy surveys and CMB fluctuations. On the other hand, a new problem for dark energy models based on f(R) gravity is pointed which is connected with possible overproduction of new massive scalar particles (scalarons) arising in this theory in the very early Universe.