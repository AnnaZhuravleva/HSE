Aims: Solar radio type II bursts are rarely seen at frequencies higher than a few hundred MHz. Since metric type II bursts are thought to be signatures of propagating shock waves, it is of interest to know how these shocks, and the type II bursts, are formed. In particular, how are high-frequency, fragmented type II bursts created? Are there differences in shock acceleration or in the surrounding medium that could explain the differences to the "typical" metric type IIs? Methods: We analyse one unusual metric type II event in detail, with comparison to white-light, EUV, and X-ray observations. As the radio event was associated with a flare and a coronal mass ejection (CME), we investigate their connection. We then utilize numerical MHD simulations to study the shock structure induced by an erupting CME in a model corona including dense loops. Results: Our simulations show that the fragmented part of the type II burst can be formed when a coronal shock driven by a mass ejection passes through a system of dense loops overlying the active region.To produce fragmented emission, the conditions for plasma emission have to be more favourable inside the loop than in the interloop area. The obvious hypothesis, consistent with our simulation model, is that the shock strength decreases significantly in the space between the denser loops. The later, more typical type II burst appears when the shock exits the dense loop system and finally, outside the active region, the type II burst dies out when the changing geometry no longer favours the electron shock-acceleration.