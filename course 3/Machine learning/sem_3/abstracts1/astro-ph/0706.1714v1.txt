We present some recent developments in the theory of particle acceleration at shock fronts in the presence of dynamical reaction of the accelerated particles and self-generation of magnetic field due to streaming instability. The spectra of accelerated particles, the velocity, magnetic field and temperature profiles can be calculated in this approach anywhere in the precursor and in the downstream region. The implications for the origin of cosmic rays and for the phenomenology of supernova remnants will be discussed.