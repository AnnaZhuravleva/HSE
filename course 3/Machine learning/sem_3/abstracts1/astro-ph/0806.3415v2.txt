We analyse f(R) modifications of Einstein's gravity as dark energy models in the light of their connection with chameleon theories. Formulated as scalar-tensor theories, the f(R) theories imply the existence of a strong coupling of the scalar field to matter. This would violate all experimental gravitational tests on deviations from Newton's law. Fortunately, the existence of a matter dependent mass and a thin shell effect allows one to alleviate these constraints. The thin shell condition also implies strong restrictions on the cosmological dynamics of the f(R) theories. As a consequence, we find that the equation of state of dark energy is constrained to be extremely close to -1 in the recent past. We also examine the potential effects of f(R) theories in the context of the Eot-wash experiments. We show that the requirement of a thin shell for the test bodies is not enough to guarantee a null result on deviations from Newton's law. As long as dark energy accounts for a sizeable fraction of the total energy density of the Universe, the constraints which we deduce also forbid any measurable deviation of the dark energy equation of state from -1. All in all, we find that both cosmological and laboratory tests imply that f(R) models are almost coincident with a Lambda-CDM model at the background level.