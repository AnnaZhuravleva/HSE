Molecules present in exoplanetary atmospheres are expected to strongly influence the atmospheric radiation balance, trace dynamical and chemical processes, and indicate the presence of disequilibrium effects. Since molecules have the potential to reveal the exoplanet atmospheric conditions and chemistry, searching for them is a high priority. The rotational-vibrational transition bands of water, carbon monoxide, and methane are anticipated to be the primary sources of non-continuum opacity in hot-Jovian planets. Since these bands overlap in wavelength, and the corresponding signatures from them are weak, decisive identification requires precision infrared spectroscopy. Here we report on a near-infrared transmission spectrum of the planet HD 189733b showing the presence of methane. Additionally, a resolved water-vapour band at 1.9 microns confirms the recent claim of water in this object. On thermochemical grounds, carbon-monoxide is expected to be abundant in the upper atmosphere of hot-Jovian exoplanets; thus the detection of methane rather than carbon-monoxide in such a hot planet could signal the presence of a horizontal chemical gradient away from the permanent dayside, or it may imply an ill-understood photochemical mechanisms that leads to an enhancement of methane.