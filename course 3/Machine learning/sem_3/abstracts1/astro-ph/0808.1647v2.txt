The formation of the first galaxies at redshifts z ~ 10-15 signaled the transition from the simple initial state of the universe to one of ever increasing complexity. We here review recent progress in understanding their assembly process with numerical simulations, starting with cosmological initial conditions and modelling the detailed physics of star formation. In this context we emphasize the importance and influence of selecting appropriate initial conditions for the star formation process. We revisit the notion of a critical metallicity resulting in the transition from primordial to present-day initial mass functions and highlight its dependence on additional cooling mechanisms and the exact initial conditions. We also review recent work on the ability of dust cooling to provide the transition to present-day low-mass star formation. In particular, we highlight the extreme conditions under which this transition mechanism occurs, with violent fragmentation in dense gas resulting in tightly packed clusters.