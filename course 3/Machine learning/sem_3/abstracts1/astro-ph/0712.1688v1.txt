We propose a solution of the cusp problem in framework of the standard $\Lambda$CDM cosmology. To do this we describe the linear and nonlinear periods of halo formation by the entropy function of dark matter particles. This approach allows us to take into account together the impact of both the processes of nonlinear relaxation of compressed matter and the small scale initial velocity perturbations in collapsed halos. We show that such random velocities lead to the random variations of the density profile of relaxed halos. As a rule, they suppress the formation of cusp--like halos and favor the creation of core--like ones. This approach allows us to reproduce observed rotation curves, to explain their random scatter and deviations from simulated ones.