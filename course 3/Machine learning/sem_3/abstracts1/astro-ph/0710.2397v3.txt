Following Paczy\'{n}ski & Zi\'{o}lkowski (1968) and Han et al. (1994), we assume that the envelope of an asymptotic giant branch (AGB) or a first giant branch (FGB) star is lost when the binding energy of the envelope is equal to zero ($\Delta W=0$) and the core mass of the AGB star or the FGB star at the point ($\Delta W=0$) is taken as the final mass. Using this assumption, we calculate the IFMRs for stars of different metallicities.We find that the IFMRs depends strongly on the metallicity, i.e. $Z=0.0001, 0.0003, 0.001, 0.004, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06, 0.08$ and 0.1. From $Z=0.04$, the final mass of the stars with a given initial mass increases with increasing or decreasing metallicity. The difference of the final mass due to the metallicity may be up to 0.4 $M_{\odot}$. A linear fit of the initial-final mass relationship in NGC 2099 (M37) shows a potential evidence of the effect of metallicity on the IFMR. The IFMR for stars of $Z=0.02$ obtained in the paper matches well with those inferred observationally in the Galaxy. For $Z\geq 0.02$, helium WDs are obtained from the stars of $M_{\rm i}\leq 1.0 M_{\odot}$ and this result is upheld by the discovery of numerous low-mass WDs in NGC 6791 which is a metal-rich old open cluster. Using the IFMR for stars of $Z=0.02$ obtained in the paper, we have reproduced the mass distribution of DA WDs in Sloan DR4 except for some ultra-massive white dwarfs. The trend that the mean mass of WDs decreases with effective temperature may originate from the increase of the initial metallicities of stars. We predict that metal-rich low-mass stars may become under-massive white dwarfs.