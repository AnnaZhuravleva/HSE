The hierarchical growth of dark matter haloes, in which galaxies are hosted, has been studied and modeled using various approaches. In this paper we use a modified version the Sheth & Lemson algorithm for a $\mathrm{\Lambda}$ cold dark matter power spectrum, and model the growth of a Milky-Way sized halo with microsolar mass resolution, corresponding to the typical Jeans mass for a dark matter Weakly Interacting Massive Particle with mass of 100 GeV. We then compute the \emph{unevolved} subhalo mass function and build-up a Milky-Way halo placing and evolving its satellites. This subhalo population is used to study the $\gamma$-ray emission from dark matter annihilation. In this case, the subhaloes which populate the host halo have been computed considering only progenitor haloes accreted by the main branch of the tree, so as to correctly treat the embedding of sub-subhaloes inside subhaloes. Each subhalo will indeed host atthe present-time sub-subhaloes accreted when it was an isolated system. In order to compute the sub-subhalo population of a Milky-Way dwarf galaxy, like Draco, and to study its $\gamma$-ray emission, we first estimate the Draco virial mass at merging redshift $z_m$ and then we run the merger tree from $z_m$ following the halo down to the dark matter Jeans mass. We then study the effect on the Fermi-LAT (GLAST) detectability for both subhaloes in the Milky-Way and in Draco, and we show how subhaloes cannot be responsible for the boost factor needed for detection.