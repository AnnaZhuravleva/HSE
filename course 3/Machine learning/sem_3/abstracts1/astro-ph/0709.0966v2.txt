Gravitational fragmentation has been proposed as a mechanism for the formation of giant planets in close orbits around solar-type stars. However, it is debatable whether this mechanism can function in the inner regions (R<40 AU) of real discs. We use a newly developed method for treating the energy equation and the equation of state, which accounts for radiative transfer effects in SPH simulations of circumstellar discs. The different chemical and internal states of hydrogen and the properties of dust at different densities and temperatures (ice coated dust grains at low temperatures, ice melting, dust sublimation) are all taken into account by the new method.We present radiative hydrodynamic simulations of the inner regions of massive circumstellar discs and examine two cases: (i) a disc irradiated by a cool background radiation field (T_bgr=10K)and (ii) a disc heated by radiation from its central star (T_bgr~1/R). In neither case does the disc fragment: in the former because it cannot cool fast enough and in the latter because it is not gravitationally unstable. Our results (a) corroborate previous numerical results using different treatments for the hydrodynamics and the radiative transfer, and (b) confirm our own earlier analytic predictions. We conclude that disc fragmentation is unlikely to be able to produce giant planets around solar-type stars at radii <40 AU.