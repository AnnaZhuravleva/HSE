We developed a code for the reconstruction of nonlinear force-free and non-force-free coronal magnetic fields. The 3D magnetic field is computed numerically with the help of an optimization principle. The force-free and non-force-free codes are compiled in one program. The force-free approach needs photospheric vector magnetograms as input. The non-force-free code additionally requires the line-of-sight integrated coronal density distribution in combination with a tomographic inversion code. Previously the optimization approach has been used to compute magnetic fields using all six boundaries of a computational box. Here we extend this method and show how the coronal magnetic field can be reconstructed only from the bottom boundary, where the boundary conditions are measured with vector magnetographs. The program is planed for use within the Stereo mission.