We have used the Ep,i-Eiso correlation of GRBs to measure the cosmological parameter Omega_M. By adopting a maximum likelihood approach which allows us to correctly quantify the extrinsic (i.e. non--Poissonian) scatter of the correlation, we constrain (for a flat universe) Omega_M to 0.04-0.40 (68% confidence level), with a best fit value of Omega_M ~ 0.15, and exclude Omega_M = 1 at 99.9% confidence level. If we release the assumption of a flat universe, we still find evidence for a low value of Omega_M (0.04-0.50 at 68% confidence level) and a weak dependence of the dispersion of the Ep,i-Eiso correlation on Omega_Lambda (with an upper limit of Omega_Lambda ~ 1.15 at 90% confidence level). Our approach makes no assumptions on the Ep,i-Eiso correlation and it does not use other calibrators to set the "zero' point of the relation, therefore our treatment of the data is not affected by circularity and the results are independent of those derived via type Ia SNe (or other cosmological probes). Unlike other multi-parameters correlations, our analysis grounds on only two parameters, then including a larger number (a factor ~3) of GRBs and being less affected by systematics. Simulations based on realistic extrapolations of ongoing (and future) GRB experiments (e.g., Swift, Konus-Wind, GLAST) show that: i) the uncertainties on cosmological parameters can be significantly decreased; ii) future data will allow us to get clues on the "dark energy" evolution.