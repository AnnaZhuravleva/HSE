We discuss observational consequences of f(R) dark energy scenarios that satisfy local gravity constraints (LGC) as well as conditions of the cosmological viability. The model we study is given by m(r)=C(-r-1)^p (C>0, p>1) with m=Rf_{,RR}/f_{,R} and r=-Rf_{,R}/f, which cover viable f(R) models proposed so far in a high-curvature region designed to be compatible with LGC. The equation of state of dark energy exhibits a divergence at a redshift z_c that can be as close as a few while satisfying sound horizon constraints of Cosmic Microwave Background (CMB). We study the evolution of matter density perturbations in details and place constraints on model parameters from the difference of spectral indices of power spectra between CMB and galaxy clustering. The models with p>5 can be consistent with those observational constraints as well as LGC. We also discuss the evolution of perturbations in the Ricci scalar R and show that an oscillating mode (scalaron) can easily dominate over a matter-induced mode as we go back to the past. This violates the stability of cosmological solutions, thus posing a problem about how the over-production of scalarons should be avoided in the early universe.