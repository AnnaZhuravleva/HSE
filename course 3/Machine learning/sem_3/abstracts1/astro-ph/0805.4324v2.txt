This work aims to constrain the physical nature of umbral dots (UDs) using high-resolution spectropolarimetry. Full Stokes spectra recorded by the spectropolarimeter on Hinode of 51 UDs in a sunspot close to the disk center are analyzed. The height dependence of the temperature, magnetic field vector, and line-of-sight velocity across each UD is obtained from an inversion of the Stokes vectors of the two FeI lines at 630 nm. No difference is found at higher altitudes (-3 <= log(tau) <= -2) between the UDs and the diffuse umbral background. Below that level the difference rapidly increases, so that at the continuum formation level (log(tau) = 0) we find on average a temperature enhancement of 570 K, a magnetic field weakening of 510 G, and upflows of 800 m/s for peripheral UDs, whereas central UDs display an excess temperature of on average 550 K, a field weakening of 480 G, and no significant upflows. The results for, in particular, the peripheral UDs, including cuts of magnetic vector and velocity through them, look remarkably similar to the output of recent radiation MHD simulations. They strongly suggest that UDs are produced by convective upwellings.