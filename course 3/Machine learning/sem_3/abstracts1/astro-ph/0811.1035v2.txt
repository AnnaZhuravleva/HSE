We investigate the effect of radiative feedback on the star formation process using radiation hydrodynamical simulations. We repeat the previous hydrodynamical star cluster formation simulations of Bate et al., and Bate & Bonnell, but we use a realistic gas equation of state and radiative transfer in the flux-limited diffusion approximation rather than the original barotropic equation of state.   Whereas star formation in the barotropic simulations continued unabated until the simulation was stopped, we find that radiative feedback essentially terminates the production of new objects after roughly one local dynamical time. Radiative feedback also dramatically decreases the propensity of massive circumstellar discs to fragment and inhibits fragmentation of other dense gas (e.g. filaments) close to existing protostellar objects. These two effects decrease the numbers of protostars formed by a factor of approximately 4. Whereas the original simulations produced more brown dwarfs than stars, the radiative feedback results in a ratio of stars to brown dwarfs of approximately 5:1, in much better agreement with observations. Most importantly, we find that although the characteristic stellar mass in the original calculations scaled linearly with the initial mean Jeans mass, when radiative feedback is included the characteristic stellar mass is indistinguishable for the two calculations. We thus propose that the reason the observed initial mass function appears to be universal is due to self-regulation of the star formation process by radiative feedback. We present an analytic argument showing how a characteristic mass may be derived that is relatively independent of initial conditions such as the cloud's density. (Abridged)