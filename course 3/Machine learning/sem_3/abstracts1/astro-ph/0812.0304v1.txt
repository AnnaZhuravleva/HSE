A new means of incorporating radiative transfer into smoothed particle hydrodynamics (SPH) is introduced, which builds on the success of two previous methods - the polytropic cooling approximation as devised by Stamatellos et al (2007), and flux limited diffusion (e.g. Mayer et al 2007). This hybrid method preserves the strengths of its individual components, while removing the need for atmosphere matching or other boundary conditions to marry optically thick and optically thin regions. The code uses a non-trivial equation of state to calculate temperatures and opacities of SPH particles, which captures the effects of molecular hydrogen dissociation, atomic hydrogen ionisation, He0 and He+ ionisation, ice evaporation, dust sublimation, molecular absorption, bound-free and free-free transitions and electron scattering. The method is tested in several scenarios, including: (1) the evolution of a 0.07 solar mass protoplanetary disc surrounding a 0.5 solar mass star; (2) the collapse of a 1 solar mass protostellar cloud, and (3) the thermal relaxation of temperature fluctuations in a static homogeneous sphere.