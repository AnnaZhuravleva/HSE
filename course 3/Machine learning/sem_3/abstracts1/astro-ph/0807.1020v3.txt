We use scalar-field Lagrangians with a non-canonical kinetic term to obtain unified dark matter models where both the dark matter and the dark energy, the latter mimicking a cosmological constant, are described by the scalar field itself. In this framework, we propose a technique to reconstruct models where the effective speed of sound is small enough that the scalar field can cluster. These models avoid the strong time evolution of the gravitational potential and the large Integrated Sachs-Wolfe effect which have been a serious drawback of previously considered models. Moreover, these unified dark matter scalar field models can be easily generalized to behave as dark matter plus a dark energy component behaving like any type of quintessence fluid.