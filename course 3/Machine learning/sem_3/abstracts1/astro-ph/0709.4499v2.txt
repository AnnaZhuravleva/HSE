We use deep (~120 ks) XMM-Newton data of the M87 halo to analyze its spatially resolved temperature structure and chemical composition. We focus particularly on the regions of enhanced X-ray brightness associated with the inner radio lobes, which are known not to be described very well by single-temperature spectral models. Compared to a simple two-temperature fit, we obtain a better and more physical description of the spectra using a model that involves a continuous range of temperatures in each spatial bin. The range of temperatures of the multiphase gas spans ~0.6-3.2 keV. Such a multiphase structure is only possible if thermal conduction is suppressed by magnetic fields. In the multi-temperature regions, we find a correlation between the amount of gas cooler than the surrounding X-ray plasma and the metallicity, and conclude that the cool gas is more metal-rich than the ambient halo. We estimate the average Fe abundance of the cool gas to ~2.2 solar. Our results thus point toward the key role of the active galactic nucleus (AGN) in transporting heavy elements into the intracluster medium. The abundance ratios of O/Si/S/Fe in and outside the X-ray arms are similar, indicating that the dominant fraction of metals in the gas halo was uplifted by AGN outbursts relatively recently compared to the age of M87. Our estimate for the mass of the cool gas is 5e8 M_sun, which probably stems from a mixture of ICM, stellar mass loss, and Type Ia supernova products. ~30-110 Myr are required to produce the observed metals in the cool gas. Finally, we put upper limits on possible non-thermal X-ray emission from M87 and, combining it with the 90 cm radio maps, we put lower limits of around ~0.5-1.0 muG on the magnetic field strength.