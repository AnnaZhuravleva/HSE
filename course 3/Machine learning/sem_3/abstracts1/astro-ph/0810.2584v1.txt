The formation of a circumplanetary disk and accretion of angular momentum onto a protoplanetary system are investigated using 3D hydrodynamical simulations. The local region around a protoplanet in a protoplanetary disk is considered with sufficient spatial resolution: the region from outside the Hill sphere to the Jovian radius is covered by the nested-grid method. To investigate the thermal effects of the circumplanetary disk, various equations of state are adopted. Large thermal energy around the protoplanet slightly changes the structure of the circumplanetary disk. Compared with a model adopting an isothermal equation of state, in a model with an adiabatic equation of state, the protoplanet's gas envelope extends farther, and a slightly thick disk appears near the protoplanet. However, different equations of state do not affect the acquisition process of angular momentum for the protoplanetary system. Thus, the specific angular momentum acquired by the system is fitted as a function only of the protoplanet's mass. A large fraction of the total angular momentum contributes to the formation of the circumplanetary disk. The disk forms only in a compact region in very close proximity to the protoplanet. Adapting the results to the solar system, the proto-Jupiter and Saturn have compact disks in the region of r < 21 r_J (r < 0.028 r_HJ) and r < 66 r_S (r < 0.061 r_HS), respectively, where r_J (r_HJ) and r_S (r_HS) are the Jovian and Saturnian (Hill) radius, respectively. The surface density has a peak in these regions due to the balance between centrifugal force and gravity of the protoplanet. The size of these disks corresponds well to the outermost orbit of regular satellites around Jupiter and Saturn. Regular satellites may form in such compact disks around proto-gas giant planets.