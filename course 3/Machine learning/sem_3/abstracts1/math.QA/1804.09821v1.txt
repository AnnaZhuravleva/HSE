We prove some conjectures about vertex algebras which emerge in gauge theory constructions associated to the geometric Langlands program. In particular, we present the conjectural kernel vertex algebra for the $S T^2 S$ duality transformation in $SU(2)$ gauge theory. We find a surprising coincidence, which gives a powerful hint about the nature of the corresponding duality wall.   Concretely, we determine the branching rules for the small $N=4$ superconformal algebra at central charge $-9$ as well as for the generic large $N=4$ superconformal algebra at central charge $-6$. Moreover we obtain the affine vertex superalgebra of $\mathfrak{osp}(1|2)$ and the $N=1$ superconformal algebra times a free fermion as Quantum Hamiltonian reductions of the large $N=4$ superconformal algebras at $c=-6$.