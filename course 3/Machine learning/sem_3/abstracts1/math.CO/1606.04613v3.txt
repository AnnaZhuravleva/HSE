We prove a Macdonald polynomial analogue of the celebrated Nekrasov-Okounkov hook-length formula from the theory of random partitions. As an application we obtain a proof of one of the main conjectures of Hausel and Rodriguez-Villegas from their work on mixed Hodge polynomials of the moduli space of stable Higgs bundles on Riemann surfaces.